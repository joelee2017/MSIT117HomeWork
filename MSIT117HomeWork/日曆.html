<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>日曆</title>
    <link rel="stylesheet" href="Styles/StyleSheet.css" />
    <style>
        .calendar1{
            text-align:center;
            padding:20px;
            
        }
    </style>
    <script>
        document.addEventListener("DOMContentLoaded", function () {            
            document.getElementById("idSelectYear").addEventListener("change", chkisLeap)    
            document.getElementById("idSelectMonth").addEventListener("change", chkisLeap);
            document.getElementById("idSelectDay").addEventListener("change", chkisLeap);

            for (i = 2010; i <= 2020; i++) {   //新增年
                var opt = document.createElement("option");
                opt.value = i;
                opt.innerHTML = i;
                document.getElementById("idSelectYear").appendChild(opt);               
            }

            for (i = 1; i <= 12; i++) { //新增月
                var opt = document.createElement("option");
                opt.value = i;
                opt.innerHTML = i;
                document.getElementById("idSelectMonth").appendChild(opt);
            }   
            
           
            for (i = 1; i <= 31; i++) { //新增日
                var opt = document.createElement("option");
                opt.value = i;
                opt.innerHTML = i;
                document.getElementById("idSelectDay").appendChild(opt);
            }   

        });                

        function chkisLeap(selectYear, selectMonth) {
            var selectYear = parseInt(document.getElementById("idSelectYear").value);       
            var selectMonth = parseInt(document.getElementById("idSelectMonth").value);   
            var BigMonth = [1, 3, 5, 7, 8, 10, 12];
            
            var isLeap = new Date(selectYear, 1, 29).getDate() === 29; // 是否為閏年?

            if ((BigMonth.indexOf(selectMonth)) == -1 ) {
   
                    if (selectMonth == 2) {

                        var listday = document.getElementById("idSelectDay");
                        for (var i = 0; i < listday.options.length;) {
                            listday.removeChild(listday.options[i]);
                        }

                        if (isLeap == true) {
                            for (i = 1; i <= 29; i++) { //新增日
                                var opt = document.createElement("option");
                                opt.value = i;
                                opt.innerHTML = i;
                                document.getElementById("idSelectDay").appendChild(opt);
                            }
                        }
                        else {
                            for (i = 1; i <= 28; i++) { //新增日
                                var opt = document.createElement("option");
                                opt.value = i;
                                opt.innerHTML = i;
                                document.getElementById("idSelectDay").appendChild(opt);
                            }
                        }
                    }
                    else {
                        var listday = document.getElementById("idSelectDay");
                        for (var i = 0; i < listday.options.length;) {
                            listday.removeChild(listday.options[i]);
                        }

                        for (i = 1; i <= 30; i++) { //新增日
                            var opt = document.createElement("option");
                            opt.value = i;
                            opt.innerHTML = i;
                            document.getElementById("idSelectDay").appendChild(opt);
                        }

                    }                
            }

            else {
                var listday = document.getElementById("idSelectDay");
                for (var i = 0; i < listday.options.length;) {
                    listday.removeChild(listday.options[i]);
                }

                for (i = 1; i <= 31; i++) { //新增日
                    var opt = document.createElement("option");
                    opt.value = i;
                    opt.innerHTML = i;
                    document.getElementById("idSelectDay").appendChild(opt);
                }

            }
        }      

    </script>
</head>
<body>
    <div id="allpage">
        <header>
            <nav>
                <ul class="menu">
                    <li><a href="99乘法表.html">99乘法表</a></li>
                    <li><a href="個人資料驗證.html">帳號密碼</a></li>
                    <li><a href="/星星評分.html">星星評分</a></li>
                    <li><a href="/日曆.html">日曆</a></li>
                </ul>
            </nav>
        </header>
        <img class="logo1" src="image/Banner_Sky-Sanctuary.jpg" alt="logo" title="logo" />
        <div class="content">
            <article>
                <div>
                    <h2 class="title">日曆</h2>
                    <div class="calendar1">
                        <br />
                        <select id="idSelectYear"></select>
                        <label>年</label>
                        <select id="idSelectMonth"></select>
                        <label>月</label>
                        <select id="idSelectDay"></select>
                        <label>日</label>
                    </div>
                </div>
            </article>
        </div> <!--end content-->
        <footer>
            <p>MSIT117303  李崇維</p>
        </footer>
    </div> <!--end allpage-->
</body>
</html>