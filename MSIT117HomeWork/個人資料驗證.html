<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>首頁</title>
    <link rel="stylesheet" href="Styles/StyleSheet.css" />
    <style>
        .in1 {
            
        }
    </style>
    <script>
        function chkName() {
            var theName = document.getElementById("nameid").value;
            var theNameLen = theName.length;
            //var rg = /^[\u4E00-\u9FFF]{2,}$/;

            if (theName == "") {
                                
                document.getElementById("accountinfo").style.visibility = "visible";
                document.getElementById("accountinfo").innerText = "請勿空值";
                

                return false;
            }
            else if (theNameLen < 2) {


                document.getElementById("accountinfo").style.visibility = "visible";
                document.getElementById("accountinfo").innerText="請輸入兩個以上字元";

                return false;
            }

            else if (theNameLen >= 2) {

                for (var i = 0; i < theNameLen; i++) {
                    if (theName.charCodeAt(i) < 0x4E00 || theName.charCodeAt(i) > 0x9FA5) {


                        document.getElementById("accountinfo").style.visibility = "visible";
                        document.getElementById("accountinfo").innerText="請輸入中文";

                        return false;
                    }

                    else {
                        document.getElementById("accountinfo").style.color = "#00BB00";
                        document.getElementById("accountinfo").style.visibility = "visible";
                        document.getElementById("accountinfo").innerText="OK!!!";

                        return true;

                    }
                }

                
            }
        }
        
        function chkPassword(str)
        {
            var rC =
            {
                uW: '[A-Z]',
                nW: '[0-9]',
                sW: '[\\u0020-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E]'
            }
            function Reg(str, rCstr) {

                var reg = new RegExp(rCstr);

                if (reg.test(str)) {

                    return true;
                }
                else {
                    return false;
                }
            }
            if (str.length < 6)
            {

                returnEx("passwordinfo", "不能小於6位數");  

                return false;                
            }
            else
            {
                var tR = {
                    u: Reg(str, rC.uW), //大寫英文
                    n: Reg(str, rC.nW), //數字0-9
                    s: Reg(str, rC.sW)  //特殊符號
                }

                if(tR.u && tR.n && tR.s) 
                {
                    returnSuccess("passwordinfo", "OK!!")

                    return true;
                    
                }
                else
                {
                    returnEx("passwordinfo", "密碼必須含有字母、數字、特殊符號");                         
                    return false;
                }
            }
        }

        function chkdate() { // yyyy/mm/dd
            var dateStr = document.getElementById("iddate").value;
            var dateRe = new RegExp("/^([0-9]{4})[./]{1}([0-9]{1,2})[./]{1}([0-9]{1,2})$/");           
            
            

            if (dateStr == "") {

                returnEx("dateinfo", "請勿空值");      

            }
            else {

                var dateStr = document.getElementById("iddate").value;

                if (dateStr.match(dateRe)) {

                    function chkleap() {
                        var dateObj = dateStr.split("/");
                        var date = new date(dateObj);

                        //var limitInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
                        var theYear = parseInt(date[0]);
                        var theMonth = parseInt(date[1]);
                        var theDay = parseInt(date[2]);

                        //var isLeap = new Date(theYear, 1, 29).getDate() === 29; // 是否為閏年?
                        //if (isLeap) { // 若為閏年，最大日期限制改為 29
                        //    limitInMonth[1] = 29;
                        //}

                        //// 比對該日是否超過每個月份最大日期限制
                        //return theDay <= limitInMonth[theMonth - 1]


                        if (theMonth < 1 && theMonth > 12 || 1< theDay && theDay > 31) {

                            returnEx("dateinfo", "輸入超過的日期"); 

                        }
                        else {

                            returnSuccess("dateinfo", "格式正確")
                        }
                    }

                }

                else {

                    returnEx("dateinfo", "格式錯誤");                   
                }
                    
            }
        }

        function returnEx(id, ex) {

            document.getElementById("dateinfo").style.color = "red";
            document.getElementById("dateinfo").style.visibility = "visible";
            document.getElementById("dateinfo").innerText = ex;

        }
        function returnsuccess(id, su) {

            document.getElementById("dateinfo").style.color = "	#3D7878";
            document.getElementById("dateinfo").style.visibility = "visible";
            document.getElementById("dateinfo").innerText = su;

        }        
    </script>
</head>
<body>
    <div id="allpage">
        <header>
            <nav>
                <ul class="menu">
                    <li><a href="99乘法表.html">99乘法表</a></li>
                    <li><a href="個人資料驗證.html">帳號密碼</a></li>
                    <li><a href="/星星評分.html">星星評分</a></li>
                    <li><a href="">主要客戶</a></li>
                    <li><a href="">公司簡介</a></li>
                </ul>
            </nav>
        </header>
        <img class="logo1" src="image/Banner_Sky-Sanctuary.jpg" alt="logo" title="logo" />
        <div class="content">
            <article>
                <h2 class="title">帳號密碼</h2>
                <fieldset>                    
                    <legend>個人資料<em>-必填-</em></legend> 
                    <div class="st1">                        
                        <label for="nameid" class="t1">姓名：</label>
                        <input class="in1" type="text" id="nameid" name="account" placeholder="guest" size="10" autocomplete="off" onblur="chkName()"/><span id="accountinfo"></span>
                        <p class="p1">(1.不可空白，2.至少兩個字以上，3.必須全部為中文)</p>                        
                    </div>
                    <div class="st1">
                        <label for="idpassword" class="t1">密碼：</label>
                        <input class="in1" type="password" id="idpassword" name="pwd" onblur="chkPassword(document.getElementById('idpassword').value.toUpperCase());" /><span id="passwordinfo"></span>
                        <p class="p1">(1.不可空白，2.至少6個字且必須包含英文字母、數字、特殊字元[!@#$%^&*])</p>
                        
                    </div>
                    <div class="st1">
                        <label for="iddate" class="t1">日期：</label>
                        <input class="in1" type="text" id="iddate" name="date" placeholder="ex：2018/01/16" onblur="chkdate()" /><span id="dateinfo"></span>
                        <p class="p1">格式：西元年/月/日yyyy/MM/dd</p>
                    </div>
                </fieldset>
            </article>          
        </div> 
        <footer>
            <p>000000000000000000000000000000000000000000</p>
        </footer>
    </div> <!--end allpage-->
    
</body>
</html>